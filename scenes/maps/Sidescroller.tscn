[gd_scene load_steps=30 format=3 uid="uid://dkxd0fi262mch"]

[ext_resource type="Script" path="res://scripts/components/ascMap.gd" id="1_q8phr"]
[ext_resource type="PackedScene" uid="uid://b6rlytpeavs4h" path="res://scenes/environment/TileMap.tscn" id="2_76a3s"]
[ext_resource type="PackedScene" uid="uid://dvstysplrop1t" path="res://scenes/environment/Rope.tscn" id="3_gkab1"]
[ext_resource type="TileSet" uid="uid://dd7xgc75lojfx" path="res://resources/tilesets/Sand.tres" id="3_pfyuo"]
[ext_resource type="PackedScene" uid="uid://db24pbalvd8xy" path="res://scenes/entities_interactable/FastTravelPoint.tscn" id="3_t6mhi"]
[ext_resource type="PackedScene" uid="uid://cesnt15tg850w" path="res://scenes/entities_interactable/PartyManager.tscn" id="5_rwctp"]
[ext_resource type="PackedScene" uid="uid://baol22t6hknfh" path="res://scenes/entities_interactable/ShopKeep.tscn" id="6_8oxsm"]
[ext_resource type="PackedScene" uid="uid://mjs3qc7nxo7b" path="res://scenes/components/ShopWares.tscn" id="6_ppbds"]
[ext_resource type="PackedScene" uid="uid://dxkukmp8des0d" path="res://scenes/components/CombatantSquadEnemy.tscn" id="8_5ag6f"]
[ext_resource type="Resource" uid="uid://ewb80noaamii" path="res://resources/combat/combatants_enemies/Dummy.tres" id="11_2bouc"]
[ext_resource type="PackedScene" uid="uid://bywh5xbwfj453" path="res://scenes/components/CombatDialogue.tscn" id="11_fghhp"]
[ext_resource type="Resource" uid="uid://dsqfxba1b1660" path="res://resources/combat/dialogue/combat_dialogue.dialogue" id="12_1xr6o"]
[ext_resource type="Texture2D" uid="uid://lmmr2dkcaseq" path="res://images/animations/antelope.png" id="13_s8kga"]
[ext_resource type="PackedScene" uid="uid://b2indy2nvik2c" path="res://scenes/components/Interact.tscn" id="14_ie3ty"]
[ext_resource type="Resource" uid="uid://crf6wo1o4pndo" path="res://scenes/maps/TestRoom/dialogue/TestRoomA_test_fight.dialogue" id="15_21t34"]
[ext_resource type="PackedScene" uid="uid://8aufe1ycaau4" path="res://scenes/entities_interactable/SavePoint.tscn" id="16_jpex5"]
[ext_resource type="Texture2D" uid="uid://bbhysex5d5b3a" path="res://images/animations/ent_walker.png" id="18_hpo7g"]
[ext_resource type="Resource" uid="uid://cdl8vad57bffh" path="res://scenes/maps/TestRoom/dialogue/TestRoomB_animate.dialogue" id="19_hkcb8"]
[ext_resource type="Texture2D" uid="uid://cht1xhb8wi4h3" path="res://images/sprites/hug.png" id="20_1s302"]
[ext_resource type="PackedScene" uid="uid://cmvvapgedbg4q" path="res://scenes/entities/GenericNPC.tscn" id="21_cchwb"]
[ext_resource type="Texture2D" uid="uid://bgfd4prdnyfft" path="res://images/animations/base_battler.png" id="22_b8a2s"]
[ext_resource type="PackedScene" uid="uid://bnh7ste0fc6w4" path="res://scenes/environment/PatrollerGroup.tscn" id="23_1rrnk"]
[ext_resource type="Resource" uid="uid://duokdpjjw1bgv" path="res://scenes/maps/TestRoom/dialogue/TestRoomA_MrQuesty.dialogue" id="23_uupkl"]
[ext_resource type="Texture2D" uid="uid://crg0c4pd2bcgq" path="res://images/sprites/NPC_unknown_entity.png" id="24_qqfd5"]
[ext_resource type="Resource" uid="uid://dpx62r3hkqksv" path="res://scenes/maps/TestRoom/dialogue/TestRoomA_MrMan.dialogue" id="25_m8hhu"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_j63u4"]
radius = 16.0
height = 36.0

[sub_resource type="Animation" id="Animation_g1n5f"]
resource_name = "Hug"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("20_1s302")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_j4r3k"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("18_hpo7g")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [3]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [3]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [7]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2ni2q"]
_data = {
"Hug": SubResource("Animation_g1n5f"),
"RESET": SubResource("Animation_j4r3k")
}

[node name="Node2D" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_q8phr")
map_properties = Array[int]([0])

[node name="TileMap" parent="." instance=ExtResource("2_76a3s")]
tile_set = ExtResource("3_pfyuo")
cell_quadrant_size = 64
layer_0/name = "Ground"
layer_0/tile_data = PackedInt32Array(196613, 196610, 2, 131077, 196610, 0)
layer_1/name = ""
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array(262141, 131074, 1, 196605, 131074, 2, 131069, 131074, 2, 65533, 131074, 0, 262140, 65538, 2, 196604, 65538, 2, 131068, 65538, 2, 65532, 65538, 0, 262139, 65538, 2, 196603, 65538, 2, 131067, 65538, 1, 65531, 65538, 0, 262138, 65538, 2, 196602, 65538, 2, 131066, 65538, 1, 65530, 65538, 0, 262137, 2, 2, 196601, 2, 2, 131065, 2, 2, 65529, 2, 0, 65535, 2, 0, 196611, 131074, 2, 131075, 131074, 2, 65539, 131074, 1, 3, 131074, 0, 196610, 65538, 1, 131074, 65538, 2, 65538, 65538, 1, 2, 65538, 0, 196609, 65538, 2, 131073, 65538, 2, 65537, 65538, 2, 1, 65538, 0, 196608, 65538, 1, 131072, 65538, 2, 65536, 65538, 1, 0, 65538, 0, 262143, 2, 2, 196607, 2, 1, 131071, 2, 2)
layer_2/name = ""
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 0
layer_2/tile_data = PackedInt32Array(262141, 131074, 1, 196605, 131074, 1, 131069, 131074, 0, 262140, 65538, 1, 196604, 65538, 2, 131068, 65538, 0, 262139, 65538, 1, 196603, 65538, 2, 131067, 65538, 0, 262138, 2, 2, 196602, 2, 1, 131066, 2, 0, 196610, 131074, 1, 131074, 131074, 2, 65538, 131074, 0, 196609, 65538, 2, 131073, 65538, 2, 65537, 65538, 0, 196608, 65538, 2, 131072, 65538, 2, 65536, 65538, 0, 262143, 2, 2, 196607, 2, 2, 131071, 2, 0)
layer_3/name = ""
layer_3/enabled = true
layer_3/modulate = Color(1, 1, 1, 1)
layer_3/y_sort_enabled = false
layer_3/y_sort_origin = 0
layer_3/z_index = 0
layer_3/tile_data = PackedInt32Array(262141, 131074, 1, 196605, 131074, 0, 262140, 65538, 2, 196604, 65538, 0, 262139, 2, 1, 196603, 2, 0, 196609, 131074, 2, 131073, 131074, 0, 196608, 65538, 1, 131072, 65538, 0, 262143, 2, 1, 196607, 2, 0)
layer_4/name = ""
layer_4/enabled = true
layer_4/modulate = Color(1, 1, 1, 1)
layer_4/y_sort_enabled = false
layer_4/y_sort_origin = 0
layer_4/z_index = 0
layer_4/tile_data = PackedInt32Array(196612, 65538, 0, 196611, 65538, 0, 196610, 65538, 0, 196609, 65538, 0, 196608, 65538, 0, 262143, 65538, 0, 262142, 65538, 0, 262141, 65538, 0, 262140, 65538, 0, 262139, 65538, 0, 262138, 65538, 0, 262137, 65538, 0, 262136, 2, 0, 589828, 65538, 2, 524292, 65538, 1, 458756, 65538, 1, 393220, 65538, 1, 327684, 65538, 1, 262148, 65538, 1, 589827, 65538, 1, 524291, 65538, 1, 458755, 65538, 1, 393219, 65538, 1, 327683, 65538, 1, 262147, 65538, 1, 589826, 65538, 1, 524290, 65538, 1, 458754, 65538, 1, 393218, 65538, 1, 327682, 65538, 1, 262146, 65538, 1, 589825, 65538, 1, 524289, 65538, 1, 458753, 65538, 1, 393217, 65538, 1, 327681, 65538, 1, 262145, 65538, 1, 589824, 65538, 1, 524288, 65538, 1, 458752, 65538, 1, 393216, 65538, 1, 327680, 65538, 1, 262144, 65538, 1, 655359, 65538, 1, 589823, 65538, 1, 524287, 65538, 1, 458751, 65538, 1, 393215, 65538, 1, 327679, 65538, 1, 655358, 65538, 1, 589822, 65538, 1, 524286, 65538, 1, 458750, 65538, 1, 393214, 65538, 1, 327678, 65538, 1, 655357, 65538, 1, 589821, 65538, 1, 524285, 65538, 1, 458749, 65538, 1, 393213, 65538, 1, 327677, 65538, 1, 655356, 65538, 1, 589820, 65538, 1, 524284, 65538, 1, 458748, 65538, 1, 393212, 65538, 1, 327676, 65538, 1, 655355, 65538, 1, 589819, 65538, 1, 524283, 65538, 1, 458747, 65538, 1, 393211, 65538, 1, 327675, 65538, 1, 655354, 65538, 1, 589818, 65538, 1, 524282, 65538, 1, 458746, 65538, 1, 393210, 65538, 1, 327674, 65538, 1, 655353, 65538, 1, 589817, 65538, 1, 524281, 65538, 1, 458745, 65538, 1, 393209, 65538, 1, 327673, 65538, 1, 655352, 2, 1, 589816, 2, 1, 524280, 2, 1, 458744, 2, 1, 393208, 2, 1, 327672, 2, 1, 589830, 131074, 2, 524294, 131074, 1, 458758, 131074, 1, 393222, 131074, 1, 327686, 131074, 1, 262150, 131074, 1, 196614, 131074, 0, 589829, 65538, 2, 524293, 65538, 1, 458757, 65538, 1, 393221, 65538, 1, 327685, 65538, 1, 262149, 65538, 1, 196613, 65538, 0)

[node name="PatrollerGroup" parent="." instance=ExtResource("23_1rrnk")]
max_spawns = 1
enabled = false
special_chance = 0.0

[node name="SpawnPoint" type="Marker2D" parent="PatrollerGroup"]
position = Vector2(224, 127)

[node name="SpawnPoint2" type="Marker2D" parent="PatrollerGroup"]
position = Vector2(123, 153)

[node name="SpawnPoint3" type="Marker2D" parent="PatrollerGroup"]
position = Vector2(105, -43)

[node name="SpawnPoint5" type="Marker2D" parent="PatrollerGroup"]
position = Vector2(178, -45)

[node name="SpawnPoint4" type="Marker2D" parent="PatrollerGroup"]
position = Vector2(141, -42)

[node name="Chance 1" type="Marker2D" parent="PatrollerGroup"]
position = Vector2(163, -50)

[node name="PatrollerGroup2" parent="." instance=ExtResource("23_1rrnk")]
max_spawns = 2
enabled = false
special_chance = 0.0

[node name="SpawnPoint" type="Marker2D" parent="PatrollerGroup2"]
visible = false
position = Vector2(528, 163)

[node name="SpawnPoint2" type="Marker2D" parent="PatrollerGroup2"]
position = Vector2(574, 165)

[node name="Rope" parent="." instance=ExtResource("3_gkab1")]
position = Vector2(234, -4)
segment_count = 1

[node name="FastTravel" parent="." instance=ExtResource("3_t6mhi")]
visible = false
position = Vector2(243, 192)

[node name="ShopKeep" parent="." instance=ExtResource("6_8oxsm")]
visible = false
position = Vector2(56, 0)

[node name="ShopWares" parent="ShopKeep" instance=ExtResource("6_ppbds")]
god_shop = true

[node name="PartyManager" parent="." instance=ExtResource("5_rwctp")]
visible = false
position = Vector2(155, 0)

[node name="Entity" type="CharacterBody2D" parent="."]
position = Vector2(-412, -20)

[node name="CombatantSquadComponent" parent="Entity" instance=ExtResource("8_5ag6f")]
do_reinforcements = false
combatant_squad = Array[Resource("res://scripts/resources/ResCombatant.gd")]([ExtResource("11_2bouc")])
afflicted_status_effects = Array[String](["CriticalEye"])

[node name="CombatDialogue" parent="Entity" instance=ExtResource("11_fghhp")]
dialogue_resource = ExtResource("12_1xr6o")
enabled = false

[node name="Sprite2D" type="Sprite2D" parent="Entity"]
position = Vector2(0, -12)
texture = ExtResource("13_s8kga")
hframes = 5
vframes = 2

[node name="InteractComponent" parent="Entity" instance=ExtResource("14_ie3ty")]
position = Vector2(0, 8)
dialogue_resource = ExtResource("15_21t34")

[node name="SavePoint" parent="." instance=ExtResource("16_jpex5")]
position = Vector2(113, 0)
mind_rested = false

[node name="Animator" type="CharacterBody2D" parent="."]
visible = false
position = Vector2(-97, 168)
collision_layer = 0

[node name="Sprite2D" type="Sprite2D" parent="Animator"]
texture = ExtResource("18_hpo7g")
hframes = 3
vframes = 3
frame = 7

[node name="InteractComponent" parent="Animator" instance=ExtResource("14_ie3ty")]
position = Vector2(0, 8)
dialogue_resource = ExtResource("19_hkcb8")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Animator"]
position = Vector2(0, 6)
shape = SubResource("CapsuleShape2D_j63u4")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Animator"]
libraries = {
"": SubResource("AnimationLibrary_2ni2q")
}

[node name="MrMan" type="CharacterBody2D" parent="."]
visible = false
position = Vector2(-280, -12)

[node name="Sprite2D" type="Sprite2D" parent="MrMan"]
position = Vector2(0, -12)
texture = ExtResource("24_qqfd5")

[node name="InteractComponent" parent="MrMan" instance=ExtResource("14_ie3ty")]
dialogue_resource = ExtResource("25_m8hhu")

[node name="GenericNPC" parent="." instance=ExtResource("21_cchwb")]
visible = false
position = Vector2(57, -48)
texture = ExtResource("22_b8a2s")

[node name="InteractComponent" parent="GenericNPC" instance=ExtResource("14_ie3ty")]
dialogue_resource = ExtResource("23_uupkl")
move_player = true
move_followers = true

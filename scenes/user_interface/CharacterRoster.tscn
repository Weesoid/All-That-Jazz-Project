[gd_scene load_steps=4 format=3 uid="uid://dpnrwja6jamvn"]

[ext_resource type="PackedScene" uid="uid://c36dx7g860omy" path="res://scenes/user_interface/CharacterAdjust.tscn" id="1_ymvan"]
[ext_resource type="PackedScene" uid="uid://8xomgu0u202i" path="res://scenes/user_interface/RosterSelector.tscn" id="2_w1qpt"]

[sub_resource type="GDScript" id="GDScript_xd62j"]
script/source = "extends Control

func _ready():
	if OverworldGlobals.isPlayerCheating():
		show()

func _on_pressed():
	var path = \"res://resources/combat/combatants_player/\"
	var dir = DirAccess.open(path)
	if dir:
		dir.list_dir_begin()
		var file_name = dir.get_next()
		while file_name != \"\":
			var combatant = load(path+'/'+file_name)
			if !PlayerGlobals.team.has(combatant):
				PlayerGlobals.addCombatantToTeam(combatant)
			file_name = dir.get_next()
	else:
		print(\"An error occurred when trying to access the path.\")
		print(path)
	#await get_tree().process_frame
	#get_parent().get_node('CharacterAdjust').get_node('Members2').loadMembers()
"

[node name="Roster" type="Control"]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="Roster" parent="." node_paths=PackedStringArray("char_page") instance=ExtResource("2_w1qpt")]
layout_mode = 1
offset_left = -272.0
offset_top = -132.0
offset_right = 272.0
offset_bottom = -100.0
char_page = NodePath("../CharacterAdjust")

[node name="Panel" type="Panel" parent="."]
layout_mode = 0
offset_left = -280.0
offset_top = -100.0
offset_right = 280.0
offset_bottom = 118.0

[node name="CharacterAdjust" parent="." instance=ExtResource("1_ymvan")]
layout_mode = 1
offset_left = -272.0
offset_top = -88.0
offset_right = 328.0
offset_bottom = 145.0
show_temperments = true

[node name="Button" parent="CharacterAdjust/Character/Panel" index="0"]
hold_ignore_disabled = true

[node name="Formation" parent="CharacterAdjust" index="4"]
alignment = 0

[node name="SubmenuPoint" parent="CharacterAdjust" index="5"]
position = Vector2(216, 244)

[node name="GetAllCombatants" type="Button" parent="."]
layout_mode = 0
offset_left = -272.0
offset_top = -172.0
offset_right = -160.0
offset_bottom = -150.0
text = "Get All Combatants"
alignment = 0
script = SubResource("GDScript_xd62j")

[connection signal="pressed" from="GetAllCombatants" to="GetAllCombatants" method="_on_pressed"]

[editable path="CharacterAdjust"]
